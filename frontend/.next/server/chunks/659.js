"use strict";exports.id=659,exports.ids=[659],exports.modules={1621:(e,s,t)=>{t.d(s,{InsightsPanel:()=>Z});var l=t(326),r=t(7577),a=t.n(r),i=t(3431),n=t(2329),c=t(2610),o=t(5009);let d=(0,r.createContext)(void 0);function m({open:e,onOpenChange:s,children:t,className:a=""}){let[i,n]=(0,r.useState)(!1);return l.jsx(d.Provider,{value:{open:void 0!==e?e:i,onOpenChange:s||n},children:l.jsx("div",{className:a,children:t})})}function h({asChild:e=!1,children:s,className:t=""}){let i=(0,r.useContext)(d);if(!i)throw Error("CollapsibleTrigger must be used within a Collapsible component");let n=()=>{i.onOpenChange(!i.open)};return e&&a().isValidElement(s)?a().cloneElement(s,{onClick:n,className:`${s.props.className||""} ${t}`.trim()}):l.jsx("button",{className:`cursor-pointer ${t}`,onClick:n,children:s})}function g({children:e,className:s=""}){let t=(0,r.useContext)(d);if(!t)throw Error("CollapsibleContent must be used within a Collapsible component");return t.open?l.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s}`,children:e}):null}var u=t(6754),x=t(7069),p=t(2881);let y=(0,p.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=t(8393),v=t(9183),j=t(370),C=t(8019),N=t(949);let b=(0,p.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var w=t(361);let k={info:{icon:C.Z,color:"bg-blue-100 text-blue-800",borderColor:"border-blue-200",bgColor:"bg-blue-50"},warning:{icon:N.Z,color:"bg-yellow-100 text-yellow-800",borderColor:"border-yellow-200",bgColor:"bg-yellow-50"},critical:{icon:b,color:"bg-red-100 text-red-800",borderColor:"border-red-200",bgColor:"bg-red-50"}},P={metabolic:"bg-green-100 text-green-800",cardiovascular:"bg-red-100 text-red-800",inflammatory:"bg-orange-100 text-orange-800",organ:"bg-purple-100 text-purple-800",nutritional:"bg-blue-100 text-blue-800",hormonal:"bg-pink-100 text-pink-800"};function I({insight:e,className:s=""}){let t=k[e.severity],r=t.icon,a=P[e.category]||"bg-gray-100 text-gray-800";return(0,l.jsxs)(i.Zb,{className:`${s} ${t.borderColor} ${t.bgColor}`,children:[l.jsx(i.Ol,{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx(r,{className:"h-5 w-5 text-gray-600"}),l.jsx(i.ll,{className:"text-lg font-semibold text-gray-900",children:e.summary})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[l.jsx(n.C,{className:a,children:e.category}),l.jsx(n.C,{className:t.color,children:e.severity})]})]})}),(0,l.jsxs)(i.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"font-medium text-gray-700",children:"Confidence"}),(0,l.jsxs)("span",{className:"text-gray-600",children:[Math.round(100*e.confidence),"%"]})]}),l.jsx(j.E,{value:100*e.confidence,className:"h-2"})]}),e.biomarkers_involved.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Biomarkers Involved"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:e.biomarkers_involved.map(e=>l.jsx(n.C,{variant:"outline",className:"text-xs",children:e},e))})]}),e.lifestyle_factors.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Lifestyle Factors"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:e.lifestyle_factors.map(e=>l.jsx(n.C,{variant:"secondary",className:"text-xs",children:e},e))})]}),e.recommendations.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Recommendations"}),l.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,s)=>(0,l.jsxs)("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[l.jsx(w.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:e})]},s))})]}),e.evidence&&Object.keys(e.evidence).length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Evidence Summary"}),l.jsx("div",{className:"text-sm text-gray-600 bg-white p-3 rounded-md border",children:l.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(e.evidence,null,2)})})]}),l.jsx("div",{className:"pt-2 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,l.jsxs)("span",{children:["Generated on ",new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),(0,l.jsxs)("span",{children:["ID: ",e.id]})]})})]})]})}let S={metabolic:"Metabolic Health",cardiovascular:"Cardiovascular Health",inflammatory:"Inflammatory Health",organ:"Organ Health",nutritional:"Nutritional Health",hormonal:"Hormonal Health"},_={critical:3,warning:2,info:1};function Z({insights:e,className:s=""}){let[t,a]=(0,r.useState)("all"),[d,p]=(0,r.useState)("all"),[j,C]=(0,r.useState)(new Set),N=e.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{});Object.keys(N).forEach(e=>{N[e].sort((e,s)=>{let t=_[s.severity]-_[e.severity];return 0!==t?t:s.confidence-e.confidence})}),e.filter(e=>{let s="all"===t||e.category===t,l="all"===d||e.severity===d;return s&&l});let b=Array.from(new Set(e.map(e=>e.category))),w=Array.from(new Set(e.map(e=>e.severity))),k=e.length,P=e.filter(e=>"critical"===e.severity).length,Z=e.filter(e=>"warning"===e.severity).length,L=e.reduce((e,s)=>e+s.confidence,0)/k||0,A=e=>{let s=new Set(j);s.has(e)?s.delete(e):s.add(e),C(s)};return 0===k?(0,l.jsxs)(i.Zb,{className:s,children:[l.jsx(i.Ol,{children:(0,l.jsxs)(i.ll,{className:"flex items-center gap-2",children:[l.jsx(u.Z,{className:"h-5 w-5"}),"Health Insights"]})}),l.jsx(i.aY,{children:(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(x.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"No insights available yet."}),l.jsx("p",{className:"text-sm",children:"Complete your biomarker analysis to generate personalized health insights."})]})})]}):(0,l.jsxs)(i.Zb,{className:s,children:[(0,l.jsxs)(i.Ol,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(i.ll,{className:"flex items-center gap-2",children:[l.jsx(u.Z,{className:"h-5 w-5"}),"Health Insights"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(n.C,{variant:"outline",className:"text-sm",children:[k," insights"]}),P>0&&(0,l.jsxs)(n.C,{variant:"destructive",className:"text-sm",children:[P," critical"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:k}),l.jsx("div",{className:"text-sm text-gray-500",children:"Total Insights"})]}),(0,l.jsxs)("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:P+Z}),l.jsx("div",{className:"text-sm text-gray-500",children:"Need Attention"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(100*L),"%"]}),l.jsx("div",{className:"text-sm text-gray-500",children:"Avg Confidence"})]})]})]}),(0,l.jsxs)(i.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[l.jsx(y,{className:"h-4 w-4 text-gray-500"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"})]}),(0,l.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"all",children:"All Categories"}),b.map(e=>l.jsx("option",{value:e,children:S[e]||e},e))]}),(0,l.jsxs)("select",{value:d,onChange:e=>p(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"all",children:"All Severities"}),w.map(e=>l.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),("all"!==t||"all"!==d)&&l.jsx(c.z,{variant:"outline",size:"sm",onClick:()=>{a("all"),p("all")},className:"text-xs",children:"Clear Filters"})]}),(0,l.jsxs)(o.mQ,{value:t,onValueChange:a,children:[(0,l.jsxs)(o.dr,{className:"grid w-full grid-cols-7",children:[l.jsx(o.SP,{value:"all",className:"text-xs",children:"All"}),b.map(e=>l.jsx(o.SP,{value:e,className:"text-xs",children:S[e]||e},e))]}),l.jsx(o.nU,{value:"all",className:"space-y-4",children:Object.entries(N).map(([e,s])=>(0,l.jsxs)(m,{open:j.has(e),onOpenChange:()=>A(e),children:[l.jsx(h,{asChild:!0,children:l.jsx(c.z,{variant:"ghost",className:"w-full justify-between p-4 h-auto",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[j.has(e)?l.jsx(f.Z,{className:"h-4 w-4"}):l.jsx(v.Z,{className:"h-4 w-4"}),l.jsx("span",{className:"font-medium",children:S[e]||e}),l.jsx(n.C,{variant:"outline",className:"text-xs",children:s.length})]})})}),l.jsx(g,{className:"space-y-4 pl-6",children:s.map(e=>l.jsx(I,{insight:e},e.id))})]},e))}),b.map(e=>l.jsx(o.nU,{value:e,className:"space-y-4",children:N[e]?.map(e=>l.jsx(I,{insight:e},e.id))},e))]})]})]})}},5830:(e,s,t)=>{t.d(s,{V:()=>a});var l=t(551),r=t(5251);let a=(0,l.Ue)()((0,r.mW)((e,s)=>({clusters:[],selectedCluster:null,clusterInsights:[],isLoading:!1,error:null,filters:{},sort:{field:"score",direction:"desc"},searchQuery:"",currentPage:1,itemsPerPage:10,totalItems:0,pagination:{page:1,perPage:10,total:0},setClusters:s=>e({clusters:s,totalItems:s.length,pagination:{page:1,perPage:10,total:s.length}}),setSelectedCluster:s=>e({selectedCluster:s}),setClusterInsights:s=>e({clusterInsights:s}),setLoading:s=>e({isLoading:s}),setError:s=>e({error:s}),setFilters:s=>e(e=>{let t={...e.filters,...s};return(s.status&&(t.risk_level=[s.status]),s.search)?{filters:t,searchQuery:s.search,currentPage:1}:{filters:t,currentPage:1}}),clearFilters:()=>e({filters:{},currentPage:1}),setSort:s=>e({sort:s,currentPage:1}),setSearchQuery:s=>e({searchQuery:s,currentPage:1}),setCurrentPage:s=>e({currentPage:s}),setItemsPerPage:s=>e({itemsPerPage:s,currentPage:1}),setPagination:s=>e({currentPage:s.page,itemsPerPage:s.perPage,totalItems:s.total}),loadClusters:async s=>{e({isLoading:!0,error:null});try{let s=[{id:"cluster-1",name:"Metabolic Health",description:"Metabolic health cluster",biomarkers:["glucose","insulin"],score:85,risk_level:"low",category:"metabolic",insights:["Normal glucose metabolism"],recommendations:["Maintain current lifestyle"],created_at:new Date().toISOString(),status:"normal"},{id:"cluster-2",name:"Cardiovascular",description:"Cardiovascular health cluster",biomarkers:["cholesterol","triglycerides"],score:75,risk_level:"medium",category:"cardiovascular",insights:["Elevated cholesterol levels"],recommendations:["Consider lifestyle modifications"],created_at:new Date().toISOString(),status:"warning"},{id:"cluster-3",name:"Inflammation",description:"Inflammation markers",biomarkers:["crp","esr"],score:45,risk_level:"high",category:"inflammation",insights:["High inflammation detected"],recommendations:["Consult healthcare provider"],created_at:new Date().toISOString(),status:"critical"}];e({clusters:s,totalItems:s.length,pagination:{page:1,perPage:10,total:s.length},isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to load clusters",isLoading:!1})}},selectClusterById:t=>{e({selectedCluster:s().clusters.find(e=>e.id===t)||null})},selectCluster:(t,l)=>{e({selectedCluster:s().clusters.find(e=>e.id===t)||null,clusterInsights:l})},getClusterInsights:e=>s().clusterInsights.filter(s=>s.cluster_id===e),getFilteredClusters:()=>{let e=s(),t=[...e.clusters];if(e.searchQuery){let s=e.searchQuery.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.biomarkers.some(e=>e.toLowerCase().includes(s)))}if(e.filters.risk_level?.length&&(t=t.filter(s=>e.filters.risk_level.includes(s.risk_level))),e.filters.status&&(t=t.filter(s=>s.status===e.filters.status)),e.filters.category?.length&&(t=t.filter(s=>e.filters.category.includes(s.category))),e.filters.score_range){let[s,l]=e.filters.score_range;t=t.filter(e=>e.score>=s&&e.score<=l)}return e.filters.biomarkers?.length&&(t=t.filter(s=>e.filters.biomarkers.some(e=>s.biomarkers.includes(e)))),t.sort((s,t)=>{let{field:l,direction:r}=e.sort,a=s[l],i=t[l];if("risk_level"===l){let e={critical:4,high:3,medium:2,low:1};a=e[s.risk_level],i=e[t.risk_level]}return("string"==typeof a&&(a=a.toLowerCase(),i=i.toLowerCase()),"asc"===r)?a>i?1:-1:a<i?1:-1}),t},getPaginatedClusters:()=>{let e=s(),t=s().getFilteredClusters(),l=(e.currentPage-1)*e.itemsPerPage,r=l+e.itemsPerPage;return t.slice(l,r)},getSortedClusters:()=>s().getFilteredClusters(),getClusterById:e=>s().clusters.find(s=>s.id===e),getClustersByRiskLevel:e=>s().clusters.filter(s=>s.risk_level===e),getClustersByCategory:e=>s().clusters.filter(s=>s.category===e),getHighRiskClusters:()=>s().clusters.filter(e=>"high"===e.risk_level||"critical"===e.risk_level),getClusterSummary:()=>{let e=s().clusters,t=e.filter(e=>"high"===e.risk_level||"critical"===e.risk_level),l=e.map(e=>e.score).filter(e=>"number"==typeof e),r=Array.from(new Set(e.map(e=>e.category)));return{totalClusters:e.length,highRiskClusters:t.length,averageScore:l.length>0?l.reduce((e,s)=>e+s,0)/l.length:0,categories:r}},getClusterCategories:()=>Array.from(new Set(s().clusters.map(e=>e.category))),getInsightsForCluster:e=>s().clusterInsights.filter(s=>s.cluster_id===e),getActionableInsights:()=>s().clusterInsights.filter(e=>"high"===e.severity||"critical"===e.severity),filterClusters:e=>{let t=[...s().clusters];return e.status&&(t=t.filter(s=>s.status===e.status)),e.name&&(t=t.filter(s=>s.name.toLowerCase().includes(e.name.toLowerCase()))),t},paginateClusters:(e,t)=>{let l=s(),r=(e-1)*t;return l.clusters.slice(r,r+t)},updateClustersFromAnalysis:s=>{s?.clusters&&e({clusters:s.clusters}),s?.insights&&e({clusterInsights:s.insights})},clearClusters:()=>e({clusters:[],selectedCluster:null,clusterInsights:[],error:null,currentPage:1,totalItems:0,pagination:{page:1,perPage:10,total:0}})}),{name:"cluster-store"}))},6754:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(2881).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},9183:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(2881).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},8019:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(2881).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},7069:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(2881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},949:(e,s,t)=>{t.d(s,{Z:()=>l});let l=(0,t(2881).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}};