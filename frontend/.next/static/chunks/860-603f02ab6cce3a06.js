"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{5370:function(e,t,s){s.d(t,{InsightsPanel:function(){return S}});var l=s(7437),r=s(2265),a=s(4029),i=s(1875),n=s(2595),c=s(1098);let o=(0,r.createContext)(void 0);function d(e){let{open:t,onOpenChange:s,children:a,className:i=""}=e,[n,c]=(0,r.useState)(!1);return(0,l.jsx)(o.Provider,{value:{open:void 0!==t?t:n,onOpenChange:s||c},children:(0,l.jsx)("div",{className:i,children:a})})}function u(e){let{asChild:t=!1,children:s,className:a=""}=e,i=(0,r.useContext)(o);if(!i)throw Error("CollapsibleTrigger must be used within a Collapsible component");let n=()=>{i.onOpenChange(!i.open)};return t&&r.isValidElement(s)?r.cloneElement(s,{onClick:n,className:"".concat(s.props.className||""," ").concat(a).trim()}):(0,l.jsx)("button",{className:"cursor-pointer ".concat(a),onClick:n,children:s})}function m(e){let{children:t,className:s=""}=e,a=(0,r.useContext)(o);if(!a)throw Error("CollapsibleContent must be used within a Collapsible component");return a.open?(0,l.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(s),children:t}):null}var h=s(6215),g=s(525),x=s(9205);let p=(0,x.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var f=s(875),y=s(407),v=s(1236),j=s(3245),C=s(6865);let N=(0,x.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var b=s(1671);let k={info:{icon:j.Z,color:"bg-blue-100 text-blue-800",borderColor:"border-blue-200",bgColor:"bg-blue-50"},warning:{icon:C.Z,color:"bg-yellow-100 text-yellow-800",borderColor:"border-yellow-200",bgColor:"bg-yellow-50"},critical:{icon:N,color:"bg-red-100 text-red-800",borderColor:"border-red-200",bgColor:"bg-red-50"}},w={metabolic:"bg-green-100 text-green-800",cardiovascular:"bg-red-100 text-red-800",inflammatory:"bg-orange-100 text-orange-800",organ:"bg-purple-100 text-purple-800",nutritional:"bg-blue-100 text-blue-800",hormonal:"bg-pink-100 text-pink-800"};function P(e){let{insight:t,className:s=""}=e,r=k[t.severity],n=r.icon,c=w[t.category]||"bg-gray-100 text-gray-800";return(0,l.jsxs)(a.Zb,{className:"".concat(s," ").concat(r.borderColor," ").concat(r.bgColor),children:[(0,l.jsx)(a.Ol,{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(n,{className:"h-5 w-5 text-gray-600"}),(0,l.jsx)(a.ll,{className:"text-lg font-semibold text-gray-900",children:t.summary})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,l.jsx)(i.C,{className:c,children:t.category}),(0,l.jsx)(i.C,{className:r.color,children:t.severity})]})]})}),(0,l.jsxs)(a.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"font-medium text-gray-700",children:"Confidence"}),(0,l.jsxs)("span",{className:"text-gray-600",children:[Math.round(100*t.confidence),"%"]})]}),(0,l.jsx)(v.E,{value:100*t.confidence,className:"h-2"})]}),t.biomarkers_involved.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Biomarkers Involved"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:t.biomarkers_involved.map(e=>(0,l.jsx)(i.C,{variant:"outline",className:"text-xs",children:e},e))})]}),t.lifestyle_factors.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Lifestyle Factors"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:t.lifestyle_factors.map(e=>(0,l.jsx)(i.C,{variant:"secondary",className:"text-xs",children:e},e))})]}),t.recommendations.length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Recommendations"}),(0,l.jsx)("ul",{className:"space-y-1",children:t.recommendations.map((e,t)=>(0,l.jsxs)("li",{className:"flex items-start gap-2 text-sm text-gray-600",children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),(0,l.jsx)("span",{children:e})]},t))})]}),t.evidence&&Object.keys(t.evidence).length>0&&(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Evidence Summary"}),(0,l.jsx)("div",{className:"text-sm text-gray-600 bg-white p-3 rounded-md border",children:(0,l.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(t.evidence,null,2)})})]}),(0,l.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,l.jsxs)("span",{children:["Generated on ",new Date(t.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),(0,l.jsxs)("span",{children:["ID: ",t.id]})]})})]})]})}let I={metabolic:"Metabolic Health",cardiovascular:"Cardiovascular Health",inflammatory:"Inflammatory Health",organ:"Organ Health",nutritional:"Nutritional Health",hormonal:"Hormonal Health"},_={critical:3,warning:2,info:1};function S(e){let{insights:t,className:s=""}=e,[o,x]=(0,r.useState)("all"),[v,j]=(0,r.useState)("all"),[C,N]=(0,r.useState)(new Set),b=t.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});Object.keys(b).forEach(e=>{b[e].sort((e,t)=>{let s=_[t.severity]-_[e.severity];return 0!==s?s:t.confidence-e.confidence})}),t.filter(e=>{let t="all"===o||e.category===o,s="all"===v||e.severity===v;return t&&s});let k=Array.from(new Set(t.map(e=>e.category))),w=Array.from(new Set(t.map(e=>e.severity))),S=t.length,Z=t.filter(e=>"critical"===e.severity).length,L=t.filter(e=>"warning"===e.severity).length,A=t.reduce((e,t)=>e+t.confidence,0)/S||0,M=e=>{let t=new Set(C);t.has(e)?t.delete(e):t.add(e),N(t)};return 0===S?(0,l.jsxs)(a.Zb,{className:s,children:[(0,l.jsx)(a.Ol,{children:(0,l.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5"}),"Health Insights"]})}),(0,l.jsx)(a.aY,{children:(0,l.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,l.jsx)(g.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,l.jsx)("p",{children:"No insights available yet."}),(0,l.jsx)("p",{className:"text-sm",children:"Complete your biomarker analysis to generate personalized health insights."})]})})]}):(0,l.jsxs)(a.Zb,{className:s,children:[(0,l.jsxs)(a.Ol,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(a.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5"}),"Health Insights"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(i.C,{variant:"outline",className:"text-sm",children:[S," insights"]}),Z>0&&(0,l.jsxs)(i.C,{variant:"destructive",className:"text-sm",children:[Z," critical"]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:S}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Total Insights"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:Z+L}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Need Attention"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(100*A),"%"]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Avg Confidence"})]})]})]}),(0,l.jsxs)(a.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p,{className:"h-4 w-4 text-gray-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filters:"})]}),(0,l.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,l.jsx)("option",{value:"all",children:"All Categories"}),k.map(e=>(0,l.jsx)("option",{value:e,children:I[e]||e},e))]}),(0,l.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[(0,l.jsx)("option",{value:"all",children:"All Severities"}),w.map(e=>(0,l.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),("all"!==o||"all"!==v)&&(0,l.jsx)(n.z,{variant:"outline",size:"sm",onClick:()=>{x("all"),j("all")},className:"text-xs",children:"Clear Filters"})]}),(0,l.jsxs)(c.mQ,{value:o,onValueChange:x,children:[(0,l.jsxs)(c.dr,{className:"grid w-full grid-cols-7",children:[(0,l.jsx)(c.SP,{value:"all",className:"text-xs",children:"All"}),k.map(e=>(0,l.jsx)(c.SP,{value:e,className:"text-xs",children:I[e]||e},e))]}),(0,l.jsx)(c.nU,{value:"all",className:"space-y-4",children:Object.entries(b).map(e=>{let[t,s]=e;return(0,l.jsxs)(d,{open:C.has(t),onOpenChange:()=>M(t),children:[(0,l.jsx)(u,{asChild:!0,children:(0,l.jsx)(n.z,{variant:"ghost",className:"w-full justify-between p-4 h-auto",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[C.has(t)?(0,l.jsx)(f.Z,{className:"h-4 w-4"}):(0,l.jsx)(y.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"font-medium",children:I[t]||t}),(0,l.jsx)(i.C,{variant:"outline",className:"text-xs",children:s.length})]})})}),(0,l.jsx)(m,{className:"space-y-4 pl-6",children:s.map(e=>(0,l.jsx)(P,{insight:e},e.id))})]},t)})}),k.map(e=>{var t;return(0,l.jsx)(c.nU,{value:e,className:"space-y-4",children:null===(t=b[e])||void 0===t?void 0:t.map(e=>(0,l.jsx)(P,{insight:e},e.id))},e)})]})]})]})}},9006:function(e,t,s){s.d(t,{V:function(){return a}});var l=s(9625),r=s(6885);let a=(0,l.Ue)()((0,r.mW)((e,t)=>({clusters:[],selectedCluster:null,clusterInsights:[],isLoading:!1,error:null,filters:{},sort:{field:"score",direction:"desc"},searchQuery:"",currentPage:1,itemsPerPage:10,totalItems:0,pagination:{page:1,perPage:10,total:0},setClusters:t=>e({clusters:t,totalItems:t.length,pagination:{page:1,perPage:10,total:t.length}}),setSelectedCluster:t=>e({selectedCluster:t}),setClusterInsights:t=>e({clusterInsights:t}),setLoading:t=>e({isLoading:t}),setError:t=>e({error:t}),setFilters:t=>e(e=>{let s={...e.filters,...t};return(t.status&&(s.risk_level=[t.status]),t.search)?{filters:s,searchQuery:t.search,currentPage:1}:{filters:s,currentPage:1}}),clearFilters:()=>e({filters:{},currentPage:1}),setSort:t=>e({sort:t,currentPage:1}),setSearchQuery:t=>e({searchQuery:t,currentPage:1}),setCurrentPage:t=>e({currentPage:t}),setItemsPerPage:t=>e({itemsPerPage:t,currentPage:1}),setPagination:t=>e({currentPage:t.page,itemsPerPage:t.perPage,totalItems:t.total}),loadClusters:async t=>{e({isLoading:!0,error:null});try{let t=[{id:"cluster-1",name:"Metabolic Health",description:"Metabolic health cluster",biomarkers:["glucose","insulin"],score:85,risk_level:"low",category:"metabolic",insights:["Normal glucose metabolism"],recommendations:["Maintain current lifestyle"],created_at:new Date().toISOString(),status:"normal"},{id:"cluster-2",name:"Cardiovascular",description:"Cardiovascular health cluster",biomarkers:["cholesterol","triglycerides"],score:75,risk_level:"medium",category:"cardiovascular",insights:["Elevated cholesterol levels"],recommendations:["Consider lifestyle modifications"],created_at:new Date().toISOString(),status:"warning"},{id:"cluster-3",name:"Inflammation",description:"Inflammation markers",biomarkers:["crp","esr"],score:45,risk_level:"high",category:"inflammation",insights:["High inflammation detected"],recommendations:["Consult healthcare provider"],created_at:new Date().toISOString(),status:"critical"}];e({clusters:t,totalItems:t.length,pagination:{page:1,perPage:10,total:t.length},isLoading:!1})}catch(t){e({error:t instanceof Error?t.message:"Failed to load clusters",isLoading:!1})}},selectClusterById:s=>{e({selectedCluster:t().clusters.find(e=>e.id===s)||null})},selectCluster:(s,l)=>{e({selectedCluster:t().clusters.find(e=>e.id===s)||null,clusterInsights:l})},getClusterInsights:e=>t().clusterInsights.filter(t=>t.cluster_id===e),getFilteredClusters:()=>{var e,s,l;let r=t(),a=[...r.clusters];if(r.searchQuery){let e=r.searchQuery.toLowerCase();a=a.filter(t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.biomarkers.some(t=>t.toLowerCase().includes(e)))}if((null===(e=r.filters.risk_level)||void 0===e?void 0:e.length)&&(a=a.filter(e=>r.filters.risk_level.includes(e.risk_level))),r.filters.status&&(a=a.filter(e=>e.status===r.filters.status)),(null===(s=r.filters.category)||void 0===s?void 0:s.length)&&(a=a.filter(e=>r.filters.category.includes(e.category))),r.filters.score_range){let[e,t]=r.filters.score_range;a=a.filter(s=>s.score>=e&&s.score<=t)}return(null===(l=r.filters.biomarkers)||void 0===l?void 0:l.length)&&(a=a.filter(e=>r.filters.biomarkers.some(t=>e.biomarkers.includes(t)))),a.sort((e,t)=>{let{field:s,direction:l}=r.sort,a=e[s],i=t[s];if("risk_level"===s){let s={critical:4,high:3,medium:2,low:1};a=s[e.risk_level],i=s[t.risk_level]}return("string"==typeof a&&(a=a.toLowerCase(),i=i.toLowerCase()),"asc"===l)?a>i?1:-1:a<i?1:-1}),a},getPaginatedClusters:()=>{let e=t(),s=t().getFilteredClusters(),l=(e.currentPage-1)*e.itemsPerPage,r=l+e.itemsPerPage;return s.slice(l,r)},getSortedClusters:()=>t().getFilteredClusters(),getClusterById:e=>t().clusters.find(t=>t.id===e),getClustersByRiskLevel:e=>t().clusters.filter(t=>t.risk_level===e),getClustersByCategory:e=>t().clusters.filter(t=>t.category===e),getHighRiskClusters:()=>t().clusters.filter(e=>"high"===e.risk_level||"critical"===e.risk_level),getClusterSummary:()=>{let e=t().clusters,s=e.filter(e=>"high"===e.risk_level||"critical"===e.risk_level),l=e.map(e=>e.score).filter(e=>"number"==typeof e),r=Array.from(new Set(e.map(e=>e.category)));return{totalClusters:e.length,highRiskClusters:s.length,averageScore:l.length>0?l.reduce((e,t)=>e+t,0)/l.length:0,categories:r}},getClusterCategories:()=>Array.from(new Set(t().clusters.map(e=>e.category))),getInsightsForCluster:e=>t().clusterInsights.filter(t=>t.cluster_id===e),getActionableInsights:()=>t().clusterInsights.filter(e=>"high"===e.severity||"critical"===e.severity),filterClusters:e=>{let s=[...t().clusters];return e.status&&(s=s.filter(t=>t.status===e.status)),e.name&&(s=s.filter(t=>t.name.toLowerCase().includes(e.name.toLowerCase()))),s},paginateClusters:(e,s)=>{let l=t(),r=(e-1)*s;return l.clusters.slice(r,r+s)},updateClustersFromAnalysis:t=>{(null==t?void 0:t.clusters)&&e({clusters:t.clusters}),(null==t?void 0:t.insights)&&e({clusterInsights:t.insights})},clearClusters:()=>e({clusters:[],selectedCluster:null,clusterInsights:[],error:null,currentPage:1,totalItems:0,pagination:{page:1,perPage:10,total:0}})}),{name:"cluster-store"}))},6215:function(e,t,s){s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},407:function(e,t,s){s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3245:function(e,t,s){s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},525:function(e,t,s){s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6865:function(e,t,s){s.d(t,{Z:function(){return l}});let l=(0,s(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}}]);