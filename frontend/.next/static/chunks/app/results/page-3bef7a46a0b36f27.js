(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{9410:function(e,s,a){Promise.resolve().then(a.bind(a,3250))},3250:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return q}});var l=a(7437),t=a(2265),r=a(4029),i=a(2595),n=a(1098),c=a(9205);let d=(0,c.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=a(9322);let m=(0,c.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),x=(0,c.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=(0,c.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),u=(0,c.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var g=a(6215),j=a(525),N=a(1671),y=a(2430),v=a(9006),p=a(5370),b=a(1875);let f=(0,c.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);var w=a(6865),k=a(3245),Z=a(875),C=a(407);let _={metabolic:{name:"Metabolic Health",biomarkers:["glucose","hba1c","insulin","c_peptide"],color:"blue"},cardiovascular:{name:"Cardiovascular Health",biomarkers:["total_cholesterol","ldl_cholesterol","hdl_cholesterol","triglycerides","apolipoprotein_b","apolipoprotein_a1"],color:"red"},inflammatory:{name:"Inflammatory Health",biomarkers:["crp","esr","il_6","tnf_alpha"],color:"orange"},organ:{name:"Organ Function",biomarkers:["creatinine","bun","alt","ast","ggt","alkaline_phosphatase"],color:"green"},cbc:{name:"Complete Blood Count",biomarkers:["hemoglobin","hematocrit","wbc","rbc","platelets"],color:"purple"},hormonal:{name:"Hormonal Health",biomarkers:["tsh","free_t4","free_t3","cortisol","testosterone"],color:"pink"},nutritional:{name:"Nutritional Status",biomarkers:["vitamin_d","vitamin_b12","folate","iron","ferritin"],color:"yellow"}},A={glucose:"Glucose",hba1c:"HbA1c",insulin:"Insulin",c_peptide:"C-Peptide",total_cholesterol:"Total Cholesterol",ldl_cholesterol:"LDL Cholesterol",hdl_cholesterol:"HDL Cholesterol",triglycerides:"Triglycerides",apolipoprotein_b:"Apolipoprotein B",apolipoprotein_a1:"Apolipoprotein A1",crp:"C-Reactive Protein",esr:"Erythrocyte Sedimentation Rate",il_6:"Interleukin-6",tnf_alpha:"TNF-α",creatinine:"Creatinine",bun:"Blood Urea Nitrogen",alt:"ALT",ast:"AST",ggt:"GGT",alkaline_phosphatase:"Alkaline Phosphatase",hemoglobin:"Hemoglobin",hematocrit:"Hematocrit",wbc:"White Blood Cell Count",rbc:"Red Blood Cell Count",platelets:"Platelet Count",tsh:"TSH",free_t4:"Free T4",free_t3:"Free T3",cortisol:"Cortisol",testosterone:"Testosterone",vitamin_d:"Vitamin D",vitamin_b12:"Vitamin B12",folate:"Folate",iron:"Iron",ferritin:"Ferritin"},S=e=>{switch(e){case"optimal":return"text-green-600 bg-green-100";case"normal":return"text-blue-600 bg-blue-100";case"elevated":return"text-yellow-600 bg-yellow-100";case"low":return"text-orange-600 bg-orange-100";case"critical":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},z=e=>{switch(e){case"optimal":case"normal":return(0,l.jsx)(N.Z,{className:"h-4 w-4"});case"elevated":return(0,l.jsx)(j.Z,{className:"h-4 w-4"});case"low":return(0,l.jsx)(f,{className:"h-4 w-4"});case"critical":return(0,l.jsx)(w.Z,{className:"h-4 w-4"});default:return(0,l.jsx)(k.Z,{className:"h-4 w-4"})}},R=e=>{switch(e){case"optimal":return"Optimal";case"normal":return"Normal";case"elevated":return"Elevated";case"low":return"Low";case"critical":return"Critical";default:return"Unknown"}},M=(e,s)=>{if(!s)return 50;let a=s.max-s.min;return Math.max(0,Math.min(100,(e-s.min)/a*100))},Y=(e,s)=>"critical"===s?"stroke-red-500":"elevated"===s||"low"===s?"stroke-yellow-500":"optimal"===s||"normal"===s?"stroke-green-500":e<20||e>80?"stroke-red-500":e<30||e>70?"stroke-yellow-500":"stroke-green-500";function H(e){let{biomarkers:s,showDetails:a=!1}=e,[c,d]=(0,t.useState)(new Set),[o,m]=(0,t.useState)("all"),x=e=>{let s=new Set(c);s.has(e)?s.delete(e):s.add(e),d(s)},h=(()=>{let e={};return Object.entries(s).forEach(s=>{var a;let[l,t]=s,r=(null===(a=Object.entries(_).find(e=>{let[s,a]=e;return a.biomarkers.includes(l)}))||void 0===a?void 0:a[0])||"other";e[r]||(e[r]=[]),e[r].push({id:l,data:t})}),e})(),u=Object.keys(h),g=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"md",t="sm"===a?2:"md"===a?3:4,r="sm"===a?28:"md"===a?40:"lg"===a?56:40,i=2*Math.PI*r;return(0,l.jsxs)("div",{className:"".concat({sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32"}[a]," relative"),children:[(0,l.jsxs)("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[(0,l.jsx)("circle",{cx:"50",cy:"50",r:r,stroke:"currentColor",strokeWidth:t,fill:"none",className:"text-gray-200"}),(0,l.jsx)("circle",{cx:"50",cy:"50",r:r,stroke:"currentColor",strokeWidth:t,fill:"none",strokeDasharray:i,strokeDashoffset:i-e/100*i,className:"transition-all duration-1000 ".concat(Y(e,s)),strokeLinecap:"round"})]}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("span",{className:"font-bold ".concat("sm"===a?"text-sm":"md"===a?"text-lg":"text-xl"),children:Math.round(e)})})]})},N=(e,s,t)=>{let i=M(s.value,s.referenceRange);return _[t],(0,l.jsx)(r.Zb,{className:"hover:shadow-md transition-shadow",children:(0,l.jsxs)(r.aY,{className:"pt-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900",children:A[e]||e}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:s.unit})]}),(0,l.jsxs)(b.C,{className:S(s.status),children:[z(s.status),(0,l.jsx)("span",{className:"ml-1",children:R(s.status)})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:s.value.toFixed(1)}),s.referenceRange&&(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["Range: ",s.referenceRange.min,"-",s.referenceRange.max," ",s.referenceRange.unit]}),s.date&&(0,l.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:new Date(s.date).toLocaleDateString()})]}),(0,l.jsx)("div",{className:"ml-4",children:g(i,s.status,"md")})]}),a&&s.referenceRange&&(0,l.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Your value"}),(0,l.jsx)("span",{className:"font-medium",children:s.value})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Reference range"}),(0,l.jsxs)("span",{className:"font-medium",children:[s.referenceRange.min," - ",s.referenceRange.max]})]}),(0,l.jsx)("div",{className:"mt-2",children:(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"h-2 rounded-full transition-all duration-1000 ".concat(s.value<s.referenceRange.min?"bg-red-500":s.value>s.referenceRange.max?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,Math.max(0,(s.value-s.referenceRange.min)/(s.referenceRange.max-s.referenceRange.min)*100)),"%")}})})})]})]})},e)};return 0===Object.keys(s).length?(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(j.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No biomarker data available."}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Complete an analysis to view your biomarker results."})]})})}):(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"h-5 w-5"}),"Biomarker Analysis"]}),(0,l.jsx)(r.SZ,{children:"Your biomarker values with reference ranges and health status indicators"})]}),(0,l.jsx)(r.aY,{children:(0,l.jsxs)(n.mQ,{value:o,onValueChange:m,children:[(0,l.jsxs)(n.dr,{className:"grid w-full grid-cols-8",children:[(0,l.jsx)(n.SP,{value:"all",children:"All"}),u.map(e=>{var s;return(0,l.jsx)(n.SP,{value:e,children:(null===(s=_[e])||void 0===s?void 0:s.name)||e},e)})]}),(0,l.jsx)(n.nU,{value:"all",className:"space-y-6",children:u.map(e=>{var s;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(null===(s=_[e])||void 0===s?void 0:s.name)||e}),(0,l.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>x(e),children:c.has(e)?(0,l.jsx)(Z.Z,{className:"h-4 w-4"}):(0,l.jsx)(C.Z,{className:"h-4 w-4"})})]}),c.has(e)&&(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h[e].map(s=>{let{id:a,data:l}=s;return N(a,l,e)})})]},e)})}),u.map(e=>(0,l.jsx)(n.nU,{value:e,className:"space-y-4",children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h[e].map(s=>{let{id:a,data:l}=s;return N(a,l,e)})})},e))]})})]})})}var I=a(1817);let O={metabolic:"bg-blue-100 text-blue-800 border-blue-200",cardiovascular:"bg-red-100 text-red-800 border-red-200",inflammatory:"bg-orange-100 text-orange-800 border-orange-200",organ:"bg-green-100 text-green-800 border-green-200",cbc:"bg-purple-100 text-purple-800 border-purple-200",hormonal:"bg-pink-100 text-pink-800 border-pink-200",nutritional:"bg-yellow-100 text-yellow-800 border-yellow-200"},D={low:"text-green-600 bg-green-100",moderate:"text-yellow-600 bg-yellow-100",high:"text-orange-600 bg-orange-100",critical:"text-red-600 bg-red-100"},L={low:(0,l.jsx)(N.Z,{className:"h-4 w-4"}),moderate:(0,l.jsx)(k.Z,{className:"h-4 w-4"}),high:(0,l.jsx)(w.Z,{className:"h-4 w-4"}),critical:(0,l.jsx)(w.Z,{className:"h-4 w-4"})},P={improving:"text-green-600",stable:"text-blue-600",declining:"text-red-600"},T={improving:(0,l.jsx)(j.Z,{className:"h-4 w-4"}),stable:(0,l.jsx)(g.Z,{className:"h-4 w-4"}),declining:(0,l.jsx)(j.Z,{className:"h-4 w-4 transform rotate-180"})},B=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600",E=e=>e>=80?"bg-green-500":e>=60?"bg-yellow-500":e>=40?"bg-orange-500":"bg-red-500";function F(e){let{clusters:s,isLoading:a=!1,showDetails:n=!1}=e,[c,d]=(0,t.useState)(new Set),[o,m]=(0,t.useState)("all"),x=e=>{let s=new Set(c);s.has(e)?s.delete(e):s.add(e),d(s)},h="all"===o?s:s.filter(e=>e.severity===o),u=s.reduce((e,s)=>(e[s.severity]=(e[s.severity]||0)+1,e),{}),j=s.length>0?s.reduce((e,s)=>e+s.score,0)/s.length:0;return a?(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,l.jsx)(I.Z,{className:"h-8 w-8 animate-spin text-blue-500 mr-3"}),(0,l.jsx)("span",{className:"text-gray-600",children:"Loading health clusters..."})]})})}):0===s.length?(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(g.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No health clusters available."}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Complete an analysis to view your health cluster analysis."})]})})}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s.length}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Health Clusters"})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold ".concat(B(j)),children:Math.round(j)}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Average Score"})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:u.critical||0}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"Critical Issues"})]})})}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:u.high||0}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"High Priority"})]})})})]}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filter by severity:"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.z,{variant:"all"===o?"default":"outline",size:"sm",onClick:()=>m("all"),children:["All (",s.length,")"]}),(0,l.jsxs)(i.z,{variant:"critical"===o?"default":"outline",size:"sm",onClick:()=>m("critical"),className:"text-red-600 border-red-200 hover:bg-red-50",children:["Critical (",u.critical||0,")"]}),(0,l.jsxs)(i.z,{variant:"high"===o?"default":"outline",size:"sm",onClick:()=>m("high"),className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:["High (",u.high||0,")"]}),(0,l.jsxs)(i.z,{variant:"moderate"===o?"default":"outline",size:"sm",onClick:()=>m("moderate"),className:"text-yellow-600 border-yellow-200 hover:bg-yellow-50",children:["Moderate (",u.moderate||0,")"]})]})]})})}),(0,l.jsx)("div",{className:"space-y-4",children:h.map(e=>(0,l.jsx)(r.Zb,{className:"hover:shadow-md transition-shadow",children:(0,l.jsxs)(r.aY,{className:"pt-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,l.jsxs)(b.C,{className:D[e.severity],children:[L[e.severity],(0,l.jsx)("span",{className:"ml-1 capitalize",children:e.severity})]}),e.trend&&(0,l.jsxs)(b.C,{variant:"outline",className:P[e.trend],children:[T[e.trend],(0,l.jsx)("span",{className:"ml-1 capitalize",children:e.trend})]})]}),(0,l.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Score:"}),(0,l.jsxs)("span",{className:"font-semibold ".concat(B(e.score)),children:[Math.round(e.score),"/100"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Confidence:"}),(0,l.jsxs)("span",{className:"font-semibold text-blue-600",children:[Math.round(100*e.confidence),"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Biomarkers:"}),(0,l.jsx)("span",{className:"font-semibold text-gray-700",children:e.biomarkers.length})]})]})]}),(0,l.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>x(e.id),children:c.has(e.id)?(0,l.jsx)(Z.Z,{className:"h-4 w-4"}):(0,l.jsx)(C.Z,{className:"h-4 w-4"})})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"h-2 rounded-full transition-all duration-1000 ".concat(E(e.score)),style:{width:"".concat(e.score,"%")}})})}),c.has(e.id)&&(0,l.jsxs)("div",{className:"border-t border-gray-100 pt-4 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Biomarkers Analyzed"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:e.biomarkers.map(e=>(0,l.jsx)(b.C,{variant:"outline",className:"text-xs",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]}),e.recommendations&&e.recommendations.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Recommendations"}),(0,l.jsx)("ul",{className:"space-y-1",children:e.recommendations.map((e,s)=>(0,l.jsxs)("li",{className:"text-sm text-gray-600 flex items-start gap-2",children:[(0,l.jsx)("span",{className:"text-blue-500 mt-1",children:"•"}),(0,l.jsx)("span",{children:e})]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Category"}),(0,l.jsx)(b.C,{className:O[e.category]||"bg-gray-100 text-gray-800",children:e.category.replace(/([A-Z])/g," $1").trim()})]})]})]})},e.id))}),0===h.length&&"all"!==o&&(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(k.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No clusters found for the selected severity level."}),(0,l.jsx)(i.z,{variant:"outline",onClick:()=>m("all"),className:"mt-2",children:"Show All Clusters"})]})})})]})}var U=a(9376);function q(){var e,s;let{currentAnalysis:a,isLoading:c,error:b,retryAnalysis:f,clearAnalysis:w}=(0,y._)(),{clusters:k,isLoading:Z,loadClusters:C}=(0,v.V)(),[_,A]=(0,t.useState)("overview"),[S,z]=(0,t.useState)(!1),R=(0,U.useRouter)();(0,t.useEffect)(()=>{if(!a&&!c){R.push("/upload");return}!a||k.length||Z||C(a.analysis_id)},[a,c,k.length,Z,C,R]);let M=()=>{w(),R.push("/upload")},Y=()=>{if(!a)return;let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a,null,2)),s="healthiq-analysis-".concat(new Date().toISOString().split("T")[0],".json"),l=document.createElement("a");l.setAttribute("href",e),l.setAttribute("download",s),l.click()};if(c)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsx)(r.Zb,{className:"w-full max-w-md",children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(d,{className:"h-16 w-16 text-blue-500 mx-auto mb-4 animate-spin"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analyzing Your Data"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Our AI is processing your biomarker data and generating personalized insights. This may take a few moments."}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}})})]})})})});if(b)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsx)(r.Zb,{className:"w-full max-w-md",children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(o.Z,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analysis Failed"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:(null==b?void 0:b.message)||"An unknown error occurred"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(i.z,{onClick:()=>{a&&f()},className:"w-full",children:[(0,l.jsx)(d,{className:"h-4 w-4 mr-2"}),"Try Again"]}),(0,l.jsx)(i.z,{onClick:M,variant:"outline",className:"w-full",children:"Start New Analysis"})]})]})})})});if(!a)return(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsx)(r.Zb,{className:"w-full max-w-md",children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(o.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Analysis Found"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Please complete an analysis first."}),(0,l.jsx)(i.z,{onClick:M,className:"w-full",children:"Start New Analysis"})]})})})});let{results:I,created_at:O,completed_at:D}=a,L=(null==I?void 0:I.insights)||[],P={analysisId:a.analysis_id,completedAt:D,biomarkerCount:(null==I?void 0:null===(e=I.biomarkers)||void 0===e?void 0:e.length)||0,confidence:.85};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 max-w-7xl",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Your Health Analysis Results"}),(0,l.jsx)("p",{className:"text-lg text-gray-600",children:"AI-powered insights from your biomarker data"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>z(!S),children:[S?(0,l.jsx)(m,{className:"h-4 w-4 mr-2"}):(0,l.jsx)(x,{className:"h-4 w-4 mr-2"}),S?"Hide Details":"Show Details"]}),(0,l.jsxs)(i.z,{variant:"outline",size:"sm",onClick:Y,children:[(0,l.jsx)(h,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,l.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>{navigator.share&&a?navigator.share({title:"HealthIQ Analysis Results",text:"Check out my health analysis results from HealthIQ AI",url:window.location.href}):navigator.clipboard.writeText(window.location.href)},children:[(0,l.jsx)(u,{className:"h-4 w-4 mr-2"}),"Share"]})]})]}),(0,l.jsx)(r.Zb,{className:"mb-6",children:(0,l.jsx)(r.aY,{className:"pt-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Analysis ID:"}),(0,l.jsx)("p",{className:"font-mono text-xs",children:(null==P?void 0:P.analysisId)||"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Completed:"}),(0,l.jsx)("p",{children:(null==P?void 0:P.completedAt)?new Date(P.completedAt).toLocaleString():"N/A"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Biomarkers:"}),(0,l.jsxs)("p",{children:[(null==P?void 0:P.biomarkerCount)||0," analyzed"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-500",children:"Confidence:"}),(0,l.jsx)("p",{children:(null==P?void 0:P.confidence)?"".concat(Math.round(100*P.confidence),"%"):"N/A"})]})]})})})]}),(0,l.jsxs)(n.mQ,{value:_,onValueChange:A,className:"w-full",children:[(0,l.jsxs)(n.dr,{className:"grid w-full grid-cols-4 mb-8",children:[(0,l.jsxs)(n.SP,{value:"overview",className:"flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4"}),"Overview"]}),(0,l.jsxs)(n.SP,{value:"biomarkers",className:"flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"h-4 w-4"}),"Biomarkers"]}),(0,l.jsxs)(n.SP,{value:"clusters",className:"flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4"}),"Health Clusters"]}),(0,l.jsxs)(n.SP,{value:"insights",className:"flex items-center gap-2",children:[(0,l.jsx)(j.Z,{className:"h-4 w-4"}),"AI Insights"]})]}),(0,l.jsxs)(n.nU,{value:"overview",className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)(r.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(N.Z,{className:"h-5 w-5 text-green-500"}),"Overall Health Score"]})}),(0,l.jsx)(r.aY,{children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-6xl font-bold text-green-600 mb-2",children:(null==I?void 0:I.overall_score)?Math.round(I.overall_score):"N/A"}),(0,l.jsx)("p",{className:"text-gray-600",children:"out of 100"}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,l.jsx)("div",{className:"bg-green-500 h-3 rounded-full transition-all duration-1000",style:{width:"".concat((null==I?void 0:I.overall_score)||0,"%")}})})})]})})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{children:"Key Health Metrics"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("div",{className:"space-y-4",children:(null==I?void 0:I.risk_assessment)&&Object.entries(I.risk_assessment).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"capitalize text-sm font-medium",children:s.replace(/([A-Z])/g," $1").trim()}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(a,"%")}})}),(0,l.jsx)("span",{className:"text-sm font-semibold w-8",children:Math.round(a)})]})]},s)})})})]})]}),L&&L.length>0&&(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsx)(r.ll,{children:"Quick Insights"}),(0,l.jsx)(r.SZ,{children:"Key findings from your analysis"})]}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.slice(0,6).map((e,s)=>{var a;return(0,l.jsx)("div",{className:"p-4 border rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("div",{className:"w-2 h-2 rounded-full mt-2 ".concat("critical"===e.severity?"bg-red-500":"warning"===e.severity?"bg-yellow-500":"bg-blue-500")}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:null===(a=e.category)||void 0===a?void 0:a.replace(/([A-Z])/g," $1").trim()}),(0,l.jsx)("p",{className:"text-xs text-gray-600 line-clamp-2",children:e.summary})]})]})},s)})})})]})]}),(0,l.jsx)(n.nU,{value:"biomarkers",className:"space-y-6",children:(0,l.jsx)(H,{biomarkers:(null==I?void 0:null===(s=I.biomarkers)||void 0===s?void 0:s.reduce((e,s)=>(e[s.biomarker_name]={value:s.value,unit:s.unit,status:s.status,referenceRange:s.reference_range?{min:s.reference_range.min,max:s.reference_range.max,unit:s.reference_range.unit}:void 0,date:O},e),{}))||{},showDetails:S})}),(0,l.jsx)(n.nU,{value:"clusters",className:"space-y-6",children:(0,l.jsx)(F,{clusters:k.map(e=>({id:e.id,name:e.name,category:e.category,score:e.score,confidence:.85,biomarkers:e.biomarkers,description:e.description,recommendations:e.recommendations,severity:"low"===e.risk_level?"low":"medium"===e.risk_level?"moderate":"high"===e.risk_level?"high":"critical",trend:"stable"})),isLoading:Z,showDetails:S})}),(0,l.jsx)(n.nU,{value:"insights",className:"space-y-6",children:L&&L.length>0?(0,l.jsx)(p.InsightsPanel,{insights:L}):(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(j.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500",children:"No insights available yet."}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Complete your analysis to generate personalized insights."})]})})})})]}),(0,l.jsxs)("div",{className:"mt-8 flex justify-center gap-4",children:[(0,l.jsx)(i.z,{onClick:M,variant:"outline",children:"Start New Analysis"}),(0,l.jsxs)(i.z,{onClick:Y,children:[(0,l.jsx)(h,{className:"h-4 w-4 mr-2"}),"Export Results"]})]})]})})}},9322:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1817:function(e,s,a){"use strict";a.d(s,{Z:function(){return l}});let l=(0,a(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9376:function(e,s,a){"use strict";var l=a(5475);a.o(l,"useRouter")&&a.d(s,{useRouter:function(){return l.useRouter}})}},function(e){e.O(0,[638,116,860,971,117,744],function(){return e(e.s=9410)}),_N_E=e.O()}]);