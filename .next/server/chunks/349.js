exports.id=349,exports.ids=[349],exports.modules={641:(e,s,r)=>{Promise.resolve().then(r.bind(r,7733))},2990:(e,s,r)=>{Promise.resolve().then(r.bind(r,8143))},3934:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5303:()=>{},2329:(e,s,r)=>{"use strict";r.d(s,{C:()=>a});var t=r(326);function a({variant:e="default",className:s="",children:r,...a}){return t.jsx("div",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 ${{default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border border-input bg-background hover:bg-accent hover:text-accent-foreground"}[e]} ${s}`,...a,children:r})}r(7577)},2610:(e,s,r)=>{"use strict";r.d(s,{z:()=>n});var t=r(326);r(7577);var a=r(4214);function n({variant:e="default",size:s="default",className:r="",asChild:n=!1,children:i,...o}){let l=n?a.g7:"button";return t.jsx(l,{className:`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[e]} ${{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[s]} ${r}`,...o,children:i})}},3431:(e,s,r)=>{"use strict";r.d(s,{Ol:()=>n,SZ:()=>l,Zb:()=>a,aY:()=>o,ll:()=>i});var t=r(326);function a({className:e="",children:s,...r}){return t.jsx("div",{className:`rounded-lg border bg-card text-card-foreground shadow-sm ${e}`,...r,children:s})}function n({className:e="",children:s,...r}){return t.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${e}`,...r,children:s})}function i({className:e="",children:s,...r}){return t.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...r,children:s})}function o({className:e="",children:s,...r}){return t.jsx("div",{className:`p-6 pt-0 ${e}`,...r,children:s})}function l({className:e="",children:s,...r}){return t.jsx("p",{className:`text-sm text-muted-foreground ${e}`,...r,children:s})}r(7577)},370:(e,s,r)=>{"use strict";r.d(s,{E:()=>a});var t=r(326);function a({value:e,max:s=100,className:r="",...a}){return t.jsx("div",{className:`relative h-4 w-full overflow-hidden rounded-full bg-secondary ${r}`,...a,children:t.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-Math.min(Math.max(e/s*100,0),100)}%)`}})})}r(7577)},5009:(e,s,r)=>{"use strict";r.d(s,{SP:()=>l,dr:()=>o,mQ:()=>i,nU:()=>c});var t=r(326),a=r(7577);let n=(0,a.createContext)(void 0);function i({value:e,onValueChange:s,children:r,className:a=""}){return t.jsx(n.Provider,{value:{value:e,onValueChange:s},children:t.jsx("div",{className:a,children:r})})}function o({children:e,className:s=""}){return t.jsx("div",{className:`inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ${s}`,children:e})}function l({value:e,children:s,className:r=""}){let i=(0,a.useContext)(n);if(!i)throw Error("TabsTrigger must be used within a Tabs component");let o=i.value===e;return t.jsx("button",{className:`inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ${o?"bg-background text-foreground shadow-sm":""} ${r}`,onClick:()=>i.onValueChange(e),children:s})}function c({value:e,children:s,className:r=""}){let i=(0,a.useContext)(n);if(!i)throw Error("TabsContent must be used within a Tabs component");return i.value!==e?null:t.jsx("div",{className:`mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ${r}`,children:s})}},7733:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(326);function a({error:e,reset:s}){return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Something went wrong!"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:e.message||"An unexpected error occurred"}),t.jsx("button",{onClick:s,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Try again"})]})})}},8143:(e,s,r)=>{"use strict";r.d(s,{default:()=>l});var t=r(326),a=r(830),n=r(4976),i=r(4831),o=r(7577);function l({children:e}){let[s]=(0,o.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,retry:1}}}));return t.jsx(n.aH,{client:s,children:t.jsx(i.f,{attribute:"class",defaultTheme:"dark",enableSystem:!1,storageKey:"healthiq-theme",children:e})})}},1417:(e,s,r)=>{"use strict";r.d(s,{_:()=>o});var t=r(551),a=r(5251);let n=process.env.NEXT_PUBLIC_API_URL||"http://localhost:8000/api";class i{static async startAnalysis(e){try{let s=await fetch(`${n}/analysis/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.detail||`HTTP ${s.status}: ${s.statusText}`)}return{data:await s.json(),success:!0,message:"Analysis started successfully"}}catch(e){return{data:null,success:!1,error:e instanceof Error?e.message:"Failed to start analysis"}}}static async getAnalysisResult(e){try{let s=await fetch(`${n}/analysis/result?analysis_id=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){let e=await s.json().catch(()=>({}));throw Error(e.detail||`HTTP ${s.status}: ${s.statusText}`)}let r=await s.json();return{data:{analysis_id:r.analysis_id,result_version:r.result_version,biomarkers:r.biomarkers||[],clusters:r.clusters||[],insights:r.insights||[],recommendations:r.recommendations||[],overall_score:r.overall_score,meta:r.meta||{},created_at:r.created_at},success:!0,message:"Analysis result retrieved successfully"}}catch(e){return{data:null,success:!1,error:e instanceof Error?e.message:"Failed to get analysis result"}}}static subscribeToAnalysisEvents(e,s,r,t){let a=new EventSource(`${n}/analysis/events?analysis_id=${encodeURIComponent(e)}`),i=!1;return a.onmessage=e=>{try{JSON.parse(e.data),s(e)}catch(e){console.error("Failed to parse SSE event data:",e),r?.(e)}},a.onerror=e=>{console.error("SSE connection error:",e),i?console.log("SSE closed gracefully after completion"):r?.(e)},a.addEventListener("analysis_status",e=>{try{let r=JSON.parse(e.data);s(e),"complete"===r.phase&&(i=!0,a.close(),console.log("SSE closed gracefully after completion"),t?.())}catch(e){console.error("Failed to parse analysis_status event:",e),r?.(e)}}),a.addEventListener("complete",()=>{i=!0,a.close(),t?.()}),a}static validateBiomarkerData(e){let s=[];if(!e||"object"!=typeof e)return s.push("Biomarkers must be an object"),{valid:!1,errors:s};let r=Object.entries(e);for(let[e,t]of(0===r.length&&s.push("At least one biomarker is required"),r)){if(!t||"object"!=typeof t){s.push(`Biomarker ${e} must be an object`);continue}("number"!=typeof t.value||t.value<=0)&&s.push(`Biomarker ${e} must have a positive numeric value`),t.unit&&"string"==typeof t.unit||s.push(`Biomarker ${e} must have a valid unit`)}return{valid:0===s.length,errors:s}}static validateUserProfile(e){let s=[];return e&&"object"==typeof e?(("number"!=typeof e.age||e.age<0||e.age>150)&&s.push("Age must be a number between 0 and 150"),["male","female","other"].includes(e.sex)||s.push("Sex must be one of: male, female, other"),void 0!==e.weight&&("number"!=typeof e.weight||e.weight<=0)&&s.push("Weight must be a positive number if provided"),void 0!==e.height&&("number"!=typeof e.height||e.height<=0)&&s.push("Height must be a positive number if provided"),{valid:0===s.length,errors:s}):(s.push("User profile must be an object"),{valid:!1,errors:s})}static async getAnalysisHistory(e,s=10,r=0){try{let t=await fetch(`${n}/analysis/history?user_id=${encodeURIComponent(e)}&limit=${s}&offset=${r}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail||`HTTP ${t.status}: ${t.statusText}`)}return{data:await t.json(),success:!0,message:"Analysis history retrieved successfully"}}catch(e){return{data:{history:[],total:0,page:1,limit:s},success:!1,error:e instanceof Error?e.message:"Failed to get analysis history"}}}static async exportAnalysis(e,s="json",r){try{let t=await fetch(`${n}/analysis/export`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysis_id:e,format:s,user_id:r})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.detail||`HTTP ${t.status}: ${t.statusText}`)}return{data:await t.json(),success:!0,message:"Export request created successfully"}}catch(e){return{data:{export_id:"",status:"failed"},success:!1,error:e instanceof Error?e.message:"Failed to export analysis"}}}static async cancelAnalysis(e){try{return{data:{cancelled:!0},success:!0,message:"Analysis cancelled successfully"}}catch(e){return{data:{cancelled:!1},success:!1,error:e instanceof Error?e.message:"Failed to cancel analysis"}}}}let o=(0,t.Ue)()((0,a.mW)((e,s)=>({currentAnalysis:null,currentAnalysisId:null,analysisHistory:[],isLoading:!1,error:null,currentPhase:"idle",progress:0,rawBiomarkers:{},normalizedBiomarkers:{},unmappedBiomarkers:[],userProfile:null,questionnaireResponses:{},questionnaireCompleted:!1,eventSource:null,setCurrentAnalysis:s=>e({currentAnalysis:s}),setCurrentAnalysisId:s=>e({currentAnalysisId:s}),addToHistory:s=>e(e=>({analysisHistory:[s,...e.analysisHistory.slice(0,49)]})),setLoading:s=>e({isLoading:s}),setError:s=>e({error:s}),setPhase:s=>e({currentPhase:s}),setProgress:s=>e({progress:Math.max(0,Math.min(100,s))}),setRawBiomarkers:s=>e({rawBiomarkers:s}),setNormalizedBiomarkers:s=>e({normalizedBiomarkers:s}),setUnmappedBiomarkers:s=>e({unmappedBiomarkers:s}),setUserProfile:s=>e({userProfile:s}),setQuestionnaireResponses:s=>e({questionnaireResponses:s}),setQuestionnaireCompleted:s=>e({questionnaireCompleted:s}),setResponse:(s,r)=>e(e=>({questionnaireResponses:{...e.questionnaireResponses,[s]:r}})),getResponse:e=>s().questionnaireResponses[e],resetResponses:()=>e({questionnaireResponses:{}}),startAnalysis:async r=>{let t=i.validateBiomarkerData(r.biomarkers),a=i.validateUserProfile(r.user);if(!t.valid||!a.valid){let s=[...t.errors,...a.errors];e({error:{message:`Validation failed: ${s.join(", ")}`,code:"VALIDATION_ERROR",details:{biomarkerErrors:t.errors,userErrors:a.errors}},isLoading:!1,currentPhase:"idle"});return}e({isLoading:!0,error:null,currentPhase:"ingestion",progress:0,rawBiomarkers:r.biomarkers,userProfile:r.user,questionnaireResponses:r.questionnaire||{}});try{let t=await i.startAnalysis(r);if(!t.success)throw Error(t.error||"Failed to start analysis");let a=t.data.analysis_id,n={analysis_id:a,status:"pending",progress:0,created_at:new Date().toISOString()};e({currentAnalysis:n,currentAnalysisId:a,isLoading:!1,error:null,currentPhase:"ingestion",progress:0}),s().addToHistory(n);let o=i.subscribeToAnalysisEvents(a,e=>{try{let r=JSON.parse(e.data);console.log("SSE Event received:",r),r.phase&&"number"==typeof r.progress?(s().updateAnalysisProgress(a,r.progress,r.phase),"complete"===r.phase&&s().completeAnalysis(a,r.results)):"complete"===r.type||"complete"===r.phase?s().completeAnalysis(a,r.results):("error"===r.type||r.error)&&s().failAnalysis(a,{message:r.message||r.error||"Analysis failed",code:r.code||"ANALYSIS_ERROR",details:r.details})}catch(e){console.error("Failed to parse SSE event:",e)}},e=>{console.error("SSE connection error:",e);let r=s();"completed"!==r.currentPhase?s().failAnalysis(a,{message:"Connection lost during analysis",code:"CONNECTION_ERROR",details:e}):console.log("SSE error after completion - ignoring")},()=>{console.log("Analysis completed via SSE"),s().completeAnalysis(a,null)});e({eventSource:o})}catch(s){e({error:{message:s instanceof Error?s.message:"Failed to start analysis",code:"API_ERROR",details:s},isLoading:!1,currentPhase:"idle"})}},updateAnalysisProgress:(r,t,a)=>{let n=s();n.currentAnalysis?.analysis_id===r&&e({currentAnalysis:{...n.currentAnalysis,status:"processing",progress:t},progress:t,currentPhase:a})},completeAnalysis:async(r,t)=>{let a=s();if(a.currentAnalysis?.analysis_id===r)try{let n=await i.getAnalysisResult(r);if(n.success&&n.data){let r={...a.currentAnalysis,...n.data,completed_at:new Date().toISOString()};e({currentAnalysis:r,isLoading:!1,currentPhase:"completed",progress:100,error:null}),s().addToHistory(r)}else{let r={...a.currentAnalysis,status:"completed",progress:100,results:t||{biomarkers:[],clusters:[],insights:[],risk_assessment:{},recommendations:[]},completed_at:new Date().toISOString()};e({currentAnalysis:r,isLoading:!1,currentPhase:"completed",progress:100,error:null}),s().addToHistory(r)}}catch(n){console.error("Failed to fetch analysis results:",n);let r={...a.currentAnalysis,status:"completed",progress:100,results:t||{biomarkers:[],clusters:[],insights:[],risk_assessment:{},recommendations:[]},completed_at:new Date().toISOString()};e({currentAnalysis:r,isLoading:!1,currentPhase:"completed",progress:100,error:null}),s().addToHistory(r)}else e({isLoading:!1,currentPhase:"completed",progress:100,error:null})},failAnalysis:(r,t)=>{let a=s();if(a.currentAnalysis?.analysis_id===r){let r={...a.currentAnalysis,status:"failed",completed_at:new Date().toISOString()};e({currentAnalysis:r,isLoading:!1,currentPhase:"error",error:t}),s().addToHistory(r)}else e({isLoading:!1,currentPhase:"error",error:t})},clearAnalysis:()=>{let r=s();r.eventSource&&r.eventSource.close(),e({currentAnalysis:null,currentAnalysisId:null,isLoading:!1,error:null,currentPhase:"idle",progress:0,rawBiomarkers:{},normalizedBiomarkers:{},unmappedBiomarkers:[],questionnaireResponses:{},questionnaireCompleted:!1,eventSource:null})},retryAnalysis:()=>{let e=s();if(e.currentAnalysis&&e.userProfile){let r={biomarkers:e.rawBiomarkers,user:e.userProfile,questionnaire:e.questionnaireResponses};s().startAnalysis(r)}},getAnalysisById:e=>s().analysisHistory.find(s=>s.analysis_id===e),getRecentAnalyses:(e=10)=>s().analysisHistory.slice(0,e),isAnalysisComplete:()=>{let e=s();return e.currentAnalysis?.status==="completed"},getAnalysisSummary:()=>{let e=s().analysisHistory,r=e.filter(e=>"completed"===e.status),t=e.filter(e=>"failed"===e.status),a=r.map(e=>e.results?.overall_score).filter(e=>"number"==typeof e);return{totalAnalyses:e.length,completedAnalyses:r.length,failedAnalyses:t.length,averageScore:a.length>0?a.reduce((e,s)=>e+s,0)/a.length:0}}}),{name:"analysis-store"}))},6083:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`C:\Users\abroa\HealthIQ-AI-v5\app\error.tsx#default`)},4752:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l,metadata:()=>o});var t=r(9510),a=r(7366),n=r.n(a);r(7272);let i=(0,r(8570).createProxy)(String.raw`C:\Users\abroa\HealthIQ-AI-v5\app\providers.tsx#default`),o={title:"HealthIQ AI v5",description:"Precision biomarker intelligence platform"};function l({children:e}){return t.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:t.jsx("body",{className:n().className,children:t.jsx(i,{children:e})})})}},9644:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(9510);function a(){return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}},6560:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(9510);function a(){return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),t.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Page Not Found"}),t.jsx("p",{className:"text-muted-foreground mb-8",children:"The page you are looking for does not exist."}),t.jsx("a",{href:"/",className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Return Home"})]})})}},7272:()=>{}};